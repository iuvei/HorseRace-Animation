{"version":3,"sources":["../demo.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","horses","concat","document","querySelectorAll","innerHorseWrap","querySelector","viewWidth","parseInt","window","getComputedStyle","width","horseWrap","horseSky","horseOrders","horseOrderArr","horseWrapLeftValue","horseSkyLeftValue","horseLineLeft","horseLineRight","horseQuan","bottomSpace","resultDialog","closeResultDialog","horseQuanRightValue","horseLineRightValue","horseLineLeftValue","horseOrdersLeftValue","horseNumElems","totalDistance","duration","fill","map","randomBetween","sort","openData","horsesLeftsValues","rangeNumImg","item","index","openResult","Object","forEach","timeout","horseInit","horseNums","scrollLeft","isIE","style","position","addEventListener","left","getBoundingClientRect","top","bottom","horse","backgroundImage","backgroundSize","backgroundPosition","animation","num","order","clearTimeout","horseRun","timeMaps","queue","createTimeMap","timeObj","id","Math","floor","horseMove","total","arguments","undefined","speeds","leftValue","timeMap","eachTotal","move","horsesLefts","getHorsesLeft","speedMin","min","apply","values","speedMax","max","leftMax","value","leftMin","horsesLeftsKeys","keys","sort_horsesLeftsValues","a","b","sort_horsesLeftKeys","getKeyFromValue","store","get","toString","sortHorseRange","reverse_array","set","innerHorseWrap_scrollLeft","yajunHorse","guanjunHorse","jijunHorse","yajunNum","guanjunNum","jijunNum","resultOrders","v","display","setTimeout","completedHorseNums","filter","rest_horseNumElems","slice","sortHorseRangeLast","numElem","Set","split","console","log","random","obj","objArr","find","k","size","allResult","_queue","result","push","len","newArr","curItem","splice","ActiveXObject","onclick"],"mappings":"AAAA;;AAEA,SAASA,kBAAT,CAA4BC,GAA5B,EAAiC;AAAE,QAAIC,MAAMC,OAAN,CAAcF,GAAd,CAAJ,EAAwB;AAAE,aAAK,IAAIG,IAAI,CAAR,EAAWC,OAAOH,MAAMD,IAAIK,MAAV,CAAvB,EAA0CF,IAAIH,IAAIK,MAAlD,EAA0DF,GAA1D,EAA+D;AAAEC,iBAAKD,CAAL,IAAUH,IAAIG,CAAJ,CAAV;AAAmB,SAAC,OAAOC,IAAP;AAAc,KAA7H,MAAmI;AAAE,eAAOH,MAAMK,IAAN,CAAWN,GAAX,CAAP;AAAyB;AAAE;;AAEnM,IAAIO,SAAS,GAAGC,MAAH,CAAUT,mBAAmBU,SAASC,gBAAT,CAA0B,QAA1B,CAAnB,CAAV,CAAb;AACA,IAAIC,iBAAiBF,SAASG,aAAT,CAAuB,iBAAvB,CAArB;AACA,IAAIC,YAAYC,SAASC,OAAOC,gBAAP,CAAwBL,cAAxB,EAAwCM,KAAjD,CAAhB,C,CAAyE;AACzE,IAAIC,YAAYT,SAASG,aAAT,CAAuB,YAAvB,CAAhB;AACA,IAAIO,WAAWV,SAASG,aAAT,CAAuB,WAAvB,CAAf;AACA,IAAIQ,cAAcX,SAASG,aAAT,CAAuB,cAAvB,CAAlB;AACA,IAAIS,gBAAgB,GAAGb,MAAH,CAAUT,mBAAmBU,SAASC,gBAAT,CAA0B,0BAA1B,CAAnB,CAAV,CAApB;AACA,IAAIY,qBAAqB,KAAK,CAA9B;AACA,IAAIC,oBAAoB,KAAK,CAA7B;AACA,IAAIC,gBAAgBf,SAASG,aAAT,CAAuB,gBAAvB,CAApB;AACA,IAAIa,iBAAiBhB,SAASG,aAAT,CAAuB,iBAAvB,CAArB;AACA,IAAIc,YAAYjB,SAASG,aAAT,CAAuB,YAAvB,CAAhB;AACA,IAAIe,cAAclB,SAASG,aAAT,CAAuB,cAAvB,CAAlB;AACA,IAAIgB,eAAenB,SAASG,aAAT,CAAuB,eAAvB,CAAnB,C,CAA4D;AAC5D,IAAIiB,oBAAoBpB,SAASG,aAAT,CAAuB,kCAAvB,CAAxB,C,CAAoF;AACpF,IAAIkB,sBAAsB,KAAK,CAA/B;AACA,IAAIC,sBAAsB,KAAK,CAA/B;AACA,IAAIC,qBAAqB,KAAK,CAA9B;AACA,IAAIC,uBAAuB,KAAK,CAAhC;AACA,IAAIC,gBAAgB,GAAG1B,MAAH,CAAUT,mBAAmBU,SAASC,gBAAT,CAA0B,yBAA1B,CAAnB,CAAV,CAApB,C,CAAyG;AACzG,IAAIyB,gBAAgB,KAApB,C,CAA2B;AAC3B,IAAIC,WAAW,CAAC,IAAD,EAAO,EAAP,EAAW,EAAX,EAAe5B,MAAf,CAAsBT,mBAAmBE,MAAM,CAAN,EAASoC,IAAT,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,YAAY;AACrF,WAAO,KAAKC,cAAc,IAAd,EAAoB,IAApB,CAAZ;AACH,CAFuD,EAErDC,IAFqD,EAAnB,CAAtB,CAAf,C,CAEa;AACb,IAAIC,WAAW,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,EAA5B,CAAf,C,CAAgD;AAChD,IAAIC,oBAAoB,IAAxB;AACA,IAAIC,cAAc1C,MAAM,EAAN,EAAUoC,IAAV,CAAe,CAAf,EAAkBC,GAAlB,CAAsB,UAAUM,IAAV,EAAgBC,KAAhB,EAAuB;AAC3D,WAAO,CAAC,CAAD,GAAKA,QAAQ,KAAb,GAAqB,SAA5B;AACH,CAFiB,CAAlB,C,CAEI;AACJ,IAAIC,aAAa,IAAIC,MAAJ,EAAjB,C,CAA+B;AAC/BN,SAASO,OAAT,CAAiB,UAAUJ,IAAV,EAAgBC,KAAhB,EAAuB;AACpC;AACAC,eAAW,WAAWF,IAAtB,IAA8BR,SAASS,KAAT,CAA9B;AACH,CAHD;AAIA,IAAII,UAAU,IAAd;;AAEA,SAASC,SAAT,CAAmB3C,MAAnB,EAA2Ba,WAA3B,EAAwC+B,SAAxC,EAAmDR,WAAnD,EAAgE;AAC5D;AACAhC,mBAAeyC,UAAf,GAA4B,CAA5B,CAF4D,CAE7B;AAC/B,QAAIC,MAAJ,EAAY;AACR;AACA1B,oBAAY2B,KAAZ,CAAkBC,QAAlB,GAA6B,OAA7B;AACAxC,eAAOyC,gBAAP,CAAwB,QAAxB,EAAkC,YAAY;AAC1C7B,wBAAY2B,KAAZ,CAAkBG,IAAlB,GAAyB9C,eAAe+C,qBAAf,GAAuCD,IAAvC,GAA8C,IAAvE;AACA9B,wBAAY2B,KAAZ,CAAkBK,GAAlB,GAAwBzC,UAAUwC,qBAAV,GAAkCE,MAAlC,GAA2C,IAAnE;AACH,SAHD;AAIAjC,oBAAY2B,KAAZ,CAAkBG,IAAlB,GAAyB9C,eAAe+C,qBAAf,GAAuCD,IAAvC,GAA8C,IAAvE;AACA9B,oBAAY2B,KAAZ,CAAkBK,GAAlB,GAAwBzC,UAAUwC,qBAAV,GAAkCE,MAAlC,GAA2C,IAAnE;AACH,KATD,MASO;AACHjC,oBAAY2B,KAAZ,CAAkBG,IAAlB,GAAyB,CAAzB,CADG,CACyB;AAC/B;AACDf,wBAAoBzC,MAAM,EAAN,EAAUoC,IAAV,CAAe,CAAf,CAApB;AACA9B,WAAOyC,OAAP,CAAe,UAAUa,KAAV,EAAiBhB,KAAjB,EAAwB;AACnCgB,cAAMP,KAAN,CAAYQ,eAAZ,GAA8B,yBAAyBjB,QAAQ,CAAjC,IAAsC,OAApE;AACAgB,cAAMP,KAAN,CAAYS,cAAZ,GAA6B,OAA7B;AACAF,cAAMP,KAAN,CAAYU,kBAAZ,GAAiC,QAAjC;AACAH,cAAMP,KAAN,CAAYK,GAAZ,GAAkB,KAAKd,QAAQ,EAAb,GAAkB,IAApC;AACAgB,cAAMP,KAAN,CAAYG,IAAZ,GAAmB,OAAnB,CALmC,CAKP;AAC5BI,cAAMP,KAAN,CAAYW,SAAZ,GAAwB,EAAxB;AACH,KAPD;AAQA/B,kBAAcc,OAAd,CAAsB,UAAUkB,GAAV,EAAe/D,CAAf,EAAkB;AACpC;AACA+D,YAAIZ,KAAJ,CAAUU,kBAAV,GAA+BrB,YAAYxC,CAAZ,CAA/B;AACH,KAHD;AAIAiB,gBAAYkC,KAAZ,CAAkBG,IAAlB,GAAyB,MAAzB;AACApC,kBAAc2B,OAAd,CAAsB,UAAUmB,KAAV,EAAiBhE,CAAjB,EAAoB;AACtCgE,cAAMb,KAAN,CAAYK,GAAZ,GAAkB,KAAKxD,IAAI,KAAT,GAAiB,IAAnC;AACH,KAFD;AAGA6B,yBAAqB,EAArB,CAhC4D,CAgCnC;AACzBD,0BAAsB,CAAC,EAAvB,CAjC4D,CAiCjC;AAC3BE,2BAAuB,EAAvB,CAlC4D,CAkCjC;AAC3BH,0BAAsB,CAAC,GAAvB,CAnC4D,CAmChC;AAC5BR,yBAAqB,CAArB,CApC4D,CAoCpC;AACxBC,wBAAoB,CAApB,CArC4D,CAqCrC;;AAEvB6C,iBAAanB,OAAb,EAvC4D,CAuCrC;AAC1B;AACD,SAASoB,QAAT,CAAkB9D,MAAlB,EAA0B;AACtB;AACAA,WAAOyC,OAAP,CAAe,UAAUa,KAAV,EAAiBhB,KAAjB,EAAwB;AACnCgB,cAAMP,KAAN,CAAYW,SAAZ,GAAwB,8CAAxB;AACH,KAFD;AAGH;AACD;;;;AAIA,IAAIK,WAAWC,MAAM,CAAC,IAAD,EAAO,KAAP,EAAc,GAAd,EAAmB,KAAnB,EAA0B,IAA1B,CAAN,EAAuC,CAAvC,CAAf,C,CAA0D;AAC1D,SAASC,aAAT,CAAuBjE,MAAvB,EAA+B+D,QAA/B,EAAyC;AACrC;AACA,QAAIG,UAAU,IAAI1B,MAAJ,EAAd;AACAxC,WAAOyC,OAAP,CAAe,UAAUa,KAAV,EAAiBhB,KAAjB,EAAwB;AACnC4B,gBAAQZ,MAAMa,EAAd,IAAoBJ,SAASK,KAAKC,KAAL,CAAWrC,cAAc,CAAd,EAAiB+B,SAASjE,MAA1B,CAAX,CAAT,CAApB;AACH,KAFD;AAGA,WAAOoE,OAAP;AACH;AACD,SAASI,SAAT,CAAmBtE,MAAnB,EAA2B;AACvB,QAAIuE,QAAQC,UAAU1E,MAAV,GAAmB,CAAnB,IAAwB0E,UAAU,CAAV,MAAiBC,SAAzC,GAAqDD,UAAU,CAAV,CAArD,GAAoE5C,aAAhF;AACA,QAAImC,WAAWS,UAAU,CAAV,CAAf;AACA,QAAIjC,aAAaiC,UAAU,CAAV,CAAjB;AACA,QAAItC,WAAWsC,UAAU,CAAV,CAAf;AACA,QAAIpC,cAAcoC,UAAU,CAAV,CAAlB;AACA;;AAEAV,aAAS9D,MAAT,EARuB,CAQL;;AAElB,QAAI0E,SAAS,EAAb;AAAA,QACIC,YAAY,EADhB,CAVuB,CAWH;;AAEpB,QAAIC,UAAUX,cAAcjE,MAAd,EAAsB+D,QAAtB,CAAd;;AAEA,QAAIc,YAAYN,QAAQ,CAAxB,CAfuB,CAeI;;AAE3B,aAASO,IAAT,GAAgB;;AAEZ,YAAIC,cAAcC,cAAchF,MAAd,CAAlB;;AAEAA,eAAOyC,OAAP,CAAe,UAAUa,KAAV,EAAiBhB,KAAjB,EAAwB;AACnC;;AAEA,gBAAI/B,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,IAAkCU,SAAtC,EAAiD;AAC7C;AACAH,uBAAOpB,MAAMa,EAAb,IAAmBU,aAAatC,WAAWe,MAAMa,EAAjB,IAAuBS,QAAQtB,MAAMa,EAAd,EAAkB,CAAlB,CAAvB,GAA8C,EAA3D,CAAnB,CAF6C,CAEsC;AACtF,aAHD,MAGO,IAAI5D,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,KAAmCU,SAAnC,IAAgDtE,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,IAAkCU,YAAY,CAAlG,EAAqG;AACxG;AACAH,uBAAOpB,MAAMa,EAAb,IAAmBU,aAAatC,WAAWe,MAAMa,EAAjB,IAAuBS,QAAQtB,MAAMa,EAAd,EAAkB,CAAlB,CAAvB,GAA8C,EAA3D,CAAnB,CAFwG,CAErB;AACtF,aAHM,MAGA,IAAI5D,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,KAAmCU,YAAY,CAA/C,IAAoDtE,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,IAAkCU,YAAY,CAAtG,EAAyG;AAC5G;AACAH,uBAAOpB,MAAMa,EAAb,IAAmBU,aAAatC,WAAWe,MAAMa,EAAjB,IAAuBS,QAAQtB,MAAMa,EAAd,EAAkB,CAAlB,CAAvB,GAA8C,EAA3D,CAAnB,CAF4G,CAEzB;AACtF,aAHM,MAGA,IAAI5D,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,KAAmCU,YAAY,CAA/C,IAAoDtE,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,IAAkCU,YAAY,CAAtG,EAAyG;AAC5G;AACAH,uBAAOpB,MAAMa,EAAb,IAAmBU,aAAatC,WAAWe,MAAMa,EAAjB,IAAuBS,QAAQtB,MAAMa,EAAd,EAAkB,CAAlB,CAAvB,GAA8C,EAA3D,CAAnB,CAF4G,CAEzB;AACtF,aAHM,MAGA,IAAI5D,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,KAAmCU,YAAY,CAA/C,IAAoDtE,SAASwE,YAAYzB,MAAMa,EAAlB,CAAT,IAAkCU,YAAY,CAAtG,EAAyG;AAC5G;AACAH,uBAAOpB,MAAMa,EAAb,IAAmBU,aAAatC,WAAWe,MAAMa,EAAjB,IAAuBS,QAAQtB,MAAMa,EAAd,EAAkB,CAAlB,CAAvB,GAA8C,EAA3D,CAAnB,CAF4G,CAEzB;AACtF;;AAEDQ,sBAAUrB,MAAMa,EAAhB,IAAsBQ,UAAUrB,MAAMa,EAAhB,KAAuB,CAA7C;AACAQ,sBAAUrB,MAAMa,EAAhB,KAAuBO,OAAOpB,MAAMa,EAAb,CAAvB;AACAb,kBAAMP,KAAN,CAAYG,IAAZ,GAAmByB,UAAUrB,MAAMa,EAAhB,IAAsB,IAAzC;AACH,SAvBD;AAwBA,YAAIc,WAAWb,KAAKc,GAAL,CAASC,KAAT,CAAef,IAAf,EAAqB5E,mBAAmBgD,OAAO4C,MAAP,CAAcV,MAAd,CAAnB,CAArB,CAAf;AACA,YAAIW,WAAWjB,KAAKkB,GAAL,CAASH,KAAT,CAAef,IAAf,EAAqB5E,mBAAmBgD,OAAO4C,MAAP,CAAcV,MAAd,CAAnB,CAArB,CAAf;AACA,YAAIa,UAAUnB,KAAKkB,GAAL,CAASH,KAAT,CAAef,IAAf,EAAqB5E,mBAAmBgD,OAAO4C,MAAP,CAAcL,WAAd,EAA2BhD,GAA3B,CAA+B,UAAUyD,KAAV,EAAiB;AAClG,mBAAOjF,SAASiF,KAAT,CAAP;AACH,SAFqD,CAAnB,CAArB,CAAd;AAGA,YAAIC,UAAUrB,KAAKc,GAAL,CAASC,KAAT,CAAef,IAAf,EAAqB5E,mBAAmBgD,OAAO4C,MAAP,CAAcL,WAAd,EAA2BhD,GAA3B,CAA+B,UAAUyD,KAAV,EAAiB;AAClG,mBAAOjF,SAASiF,KAAT,CAAP;AACH,SAFqD,CAAnB,CAArB,CAAd;AAGA,YAAIE,kBAAkBlD,OAAOmD,IAAP,CAAYZ,WAAZ,CAAtB,CApCY,CAoCoC;AAChD5C,4BAAoBK,OAAO4C,MAAP,CAAcL,WAAd,CAApB,CArCY,CAqCoC;AAChD,YAAIa,yBAAyBzD,kBAAkBF,IAAlB,CAAuB,UAAU4D,CAAV,EAAaC,CAAb,EAAgB;AAChE,mBAAOvF,SAASsF,CAAT,IAActF,SAASuF,CAAT,CAArB;AACH,SAF4B,CAA7B,CAtCY,CAwCR;AACJ,YAAIC,sBAAsBH,uBAAuB7D,GAAvB,CAA2B,UAAUyD,KAAV,EAAiB;AAClE,mBAAOQ,gBAAgBjB,WAAhB,EAA6BS,KAA7B,CAAP;AACH,SAFyB,CAA1B,CAzCY,CA2CR;AACJ,YAAI,CAACS,MAAMC,GAAN,CAAU,qBAAV,CAAD,IAAqCD,MAAMC,GAAN,CAAU,qBAAV,EAAiCC,QAAjC,MAA+CJ,oBAAoBI,QAApB,EAAxF,EAAwH;AACpHC,2BAAezE,aAAf,EAA8BoD,WAA9B,EAA2Ca,sBAA3C,EAAmErB,KAAnE,EAA0E8B,cAAcnE,QAAd,CAA1E,EAAmGE,WAAnG,EADoH,CACH;AACpH;AACD6D,cAAMK,GAAN,CAAU,qBAAV,EAAiCP,mBAAjC,EA/CY,CA+C2C;;AAEvD,YAAIQ,4BAA4BnG,eAAeyC,UAA/C;AACA,YAAI0D,4BAA4BhC,QAAQjE,SAAxC,EAAmD;AAC/C;AACAF,2BAAeyC,UAAf,GAA4B0C,WAAWjF,YAAY,GAAvB,CAA5B,CAF+C,CAEU;AAC5D,SAHD,MAGO;AACH;AACAF,2BAAeyC,UAAf,IAA6B,CAA7B;AACH;AACD,YAAI,CAACC,MAAL,EAAa;AACT;AACA1B,wBAAY2B,KAAZ,CAAkBG,IAAlB,GAAyB9C,eAAeyC,UAAf,GAA4B,IAArD,CAFS,CAEkD;AAC9D;AACDxB,qBAAa0B,KAAb,CAAmBG,IAAnB,GAA0B9C,eAAeyC,UAAf,GAA4BvC,YAAY,CAAxC,GAA4C,IAAtE,CA7DY,CA6DgE;;AAE5E,YAAIiF,UAAUhB,KAAd,EAAqB,CAAC;AACrB;;AAED,YAAIkB,UAAUlB,KAAd,EAAqB;AACjB,gBAAIiC,aAAatG,SAASG,aAAT,CAAuB,qBAAvB,CAAjB;AACA,gBAAIoG,eAAevG,SAASG,aAAT,CAAuB,uBAAvB,CAAnB;AACA,gBAAIqG,aAAaxG,SAASG,aAAT,CAAuB,qBAAvB,CAAjB;AACA,gBAAIsG,WAAWzG,SAASG,aAAT,CAAuB,uBAAvB,CAAf;AACA,gBAAIuG,aAAa1G,SAASG,aAAT,CAAuB,2BAAvB,CAAjB;AACA,gBAAIwG,WAAW3G,SAASG,aAAT,CAAuB,uBAAvB,CAAf;AACA,gBAAIyG,eAAe,GAAG7G,MAAH,CAAUT,mBAAmBU,SAASC,gBAAT,CAA0B,4BAA1B,CAAnB,CAAV,CAAnB;AACAqG,uBAAWzD,KAAX,CAAiBQ,eAAjB,GAAmC,wBAAwBrB,SAAS,CAAT,CAAxB,GAAsC,OAAzE;AACAuE,yBAAa1D,KAAb,CAAmBQ,eAAnB,GAAqC,wBAAwBrB,SAAS,CAAT,CAAxB,GAAsC,OAA3E;AACAwE,uBAAW3D,KAAX,CAAiBQ,eAAjB,GAAmC,wBAAwBrB,SAAS,CAAT,CAAxB,GAAsC,OAAzE;AACAyE,qBAAS5D,KAAT,CAAeU,kBAAf,GAAoCrB,YAAYF,SAAS,CAAT,IAAc,CAA1B,CAApC;AACA0E,uBAAW7D,KAAX,CAAiBU,kBAAjB,GAAsCrB,YAAYF,SAAS,CAAT,IAAc,CAA1B,CAAtC;AACA2E,qBAAS9D,KAAT,CAAeU,kBAAf,GAAoCrB,YAAYF,SAAS,CAAT,IAAc,CAA1B,CAApC;AACA4E,yBAAarE,OAAb,CAAqB,UAAUsE,CAAV,EAAanH,CAAb,EAAgB;AACjC;AACAmH,kBAAEhE,KAAF,CAAQU,kBAAR,GAA6BrB,YAAYF,SAAStC,IAAI,CAAb,IAAkB,CAA9B,CAA7B;AACH,aAHD;AAIAyB,yBAAa0B,KAAb,CAAmBiE,OAAnB,GAA6B,OAA7B;AACAC,uBAAW,YAAY;AACnBzG,uBAAOqD,YAAP,CAAoBnB,OAApB,EADmB,CACW;AACjC,aAFD,EAEG,IAFH;AAGH;;AAEDA,kBAAUuE,WAAWnC,IAAX,EAAiB,OAAO,EAAxB,CAAV;AACH;AACDA;AACH;AACDnC,UAAU3C,MAAV,EAAkBa,WAAlB,EAA+Bc,aAA/B,EAA8CS,WAA9C,E,CAA4D;AAC5DkC,UAAUtE,MAAV,EAAkB4B,aAAlB,EAAiCmC,QAAjC,EAA2CxB,UAA3C,EAAuDL,QAAvD,EAAiEE,WAAjE,E,CAA+E;;;AAG/E,SAAS4C,aAAT,CAAuBhF,MAAvB,EAA+B;AAC3B;AACA,QAAI+E,cAAc,IAAIvC,MAAJ,EAAlB;AACAxC,WAAOyC,OAAP,CAAe,UAAUa,KAAV,EAAiB;AAC5B,eAAOyB,YAAYzB,MAAMa,EAAlB,IAAwB3D,OAAOC,gBAAP,CAAwB6C,KAAxB,EAA+BJ,IAA9D;AACH,KAFD;AAGA,WAAO6B,WAAP;AACH;;AAED;AACA,SAASqB,cAAT,CAAwBzE,aAAxB,EAAuCoD,WAAvC,EAAoDa,sBAApD,EAA4EhE,aAA5E,EAA2FM,QAA3F,EAAqGE,WAArG,EAAkH;AAC9G,QAAID,oBAAoBK,OAAO4C,MAAP,CAAcL,WAAd,EAA2BhD,GAA3B,CAA+B,UAAUgF,CAAV,EAAa;AAChE,eAAOxG,SAASwG,CAAT,CAAP;AACH,KAFuB,CAAxB;AAGA,QAAIG,qBAAqB/E,kBAAkBgF,MAAlB,CAAyB,UAAUJ,CAAV,EAAa;AAC3D,eAAOA,KAAKnF,aAAZ;AACH,KAFwB,EAEtB9B,MAFH,CAJ8G,CAMnG;AACX,QAAIsH,qBAAqBzF,cAAc0F,KAAd,CAAoB,CAApB,EAAuB1F,cAAc7B,MAAd,GAAuBoH,kBAA9C,CAAzB;AACA,QAAIA,sBAAsB,EAA1B,EAA8B;AAC1BI,2BAAmB3F,aAAnB,EAAkC0E,cAAcnE,QAAd,CAAlC,EAA2DE,WAA3D;AACA;AACH;AACDgF,uBAAmB3E,OAAnB,CAA2B,UAAU8E,OAAV,EAAmBjF,KAAnB,EAA0B;AACjD,YAAIsD,uBAAuB9F,MAAvB,IAAiC,GAAGG,MAAH,CAAUT,mBAAmB,IAAIgI,GAAJ,CAAQ5B,sBAAR,CAAnB,CAAV,EAA+D9F,MAApG,EAA4G;AACxG;AACAyH,oBAAQxE,KAAR,CAAcU,kBAAd,GAAmCrB,YAAY4D,gBAAgBjB,WAAhB,EAA6Ba,uBAAuBtD,KAAvB,CAA7B,EAA4DmF,KAA5D,CAAkE,GAAlE,EAAuE,CAAvE,IAA4E,CAAxF,CAAnC;AACH;AACJ,KALD;AAMH;AACD;AACA,SAASH,kBAAT,CAA4B3F,aAA5B,EAA2CO,QAA3C,EAAqDE,WAArD,EAAkE;AAC9DsF,YAAQC,GAAR,CAAYhG,aAAZ;AACAA,kBAAcc,OAAd,CAAsB,UAAU8E,OAAV,EAAmBjF,KAAnB,EAA0B;AAC5CiF,gBAAQxE,KAAR,CAAcU,kBAAd,GAAmCrB,YAAYiE,cAAcnE,QAAd,EAAwBI,KAAxB,IAAiC,CAA7C,CAAnC;AACH,KAFD;AAGH;AACD;AACA,SAASN,aAAT,CAAuB6D,CAAvB,EAA0BC,CAA1B,EAA6B;AACzB;AACA,WAAO1B,KAAKwD,MAAL,MAAiB9B,IAAID,CAArB,IAA0BA,CAAjC;AACH;AACD,SAASG,eAAT,CAAyB6B,GAAzB,EAA8BrC,KAA9B,EAAqC;AACjC;AACA,QAAIsC,SAAStF,OAAOmD,IAAP,CAAYkC,GAAZ,EAAiB9F,GAAjB,CAAqB,UAAUM,IAAV,EAAgBC,KAAhB,EAAuB;AACrD;AACA,eAAO,EAAE,QAAQD,IAAV,EAAgB,UAAUwF,IAAIxF,IAAJ,CAA1B,EAAP;AACH,KAHY,CAAb;AAIA,WAAOyF,OAAOC,IAAP,CAAY,UAAUC,CAAV,EAAapI,CAAb,EAAgB;AAC/B,eAAOoI,EAAE,QAAF,KAAexC,KAAtB;AACH,KAFM,EAEJ,MAFI,CAAP;AAGH;AACD,SAASxB,KAAT,CAAevE,GAAf,EAAoBwI,IAApB,EAA0B;AACtB;AACA,QAAIA,OAAOxI,IAAIK,MAAf,EAAuB;AACnB;AACH;AACD,QAAIoI,YAAY,EAAhB;;AAEA,aAASC,MAAT,CAAgB1I,GAAhB,EAAqBwI,IAArB,EAA2BG,MAA3B,EAAmC;AAC/B,YAAIA,OAAOtI,MAAP,IAAiBmI,IAArB,EAA2B;AACvBC,sBAAUG,IAAV,CAAeD,MAAf;AACH,SAFD,MAEO;AACH,iBAAK,IAAIxI,IAAI,CAAR,EAAW0I,MAAM7I,IAAIK,MAA1B,EAAkCF,IAAI0I,GAAtC,EAA2C1I,GAA3C,EAAgD;AAC5C,oBAAI2I,SAAS,GAAGtI,MAAH,CAAUR,GAAV,CAAb;AAAA,oBACI+I,UAAUD,OAAOE,MAAP,CAAc7I,CAAd,EAAiB,CAAjB,CADd;AAEAuI,uBAAOI,MAAP,EAAeN,IAAf,EAAqB,GAAGhI,MAAH,CAAUmI,MAAV,EAAkBI,OAAlB,CAArB;AACH;AACJ;AACJ;AACDL,WAAO1I,GAAP,EAAYwI,IAAZ,EAAkB,EAAlB;;AAEA,WAAOC,SAAP;AACH;AACD,SAAS7B,aAAT,CAAuB5G,GAAvB,EAA4B;AACxB,WAAOA,IAAIsC,GAAJ,CAAQ,UAAUgF,CAAV,EAAanH,CAAb,EAAgB;AAC3B,eAAOH,IAAIA,IAAIK,MAAJ,GAAa,CAAb,GAAiBF,CAArB,CAAP;AACH,KAFM,CAAP,CADwB,CAGpB;AACP;AACD,SAASkD,IAAT,GAAgB;AACZ;AACA,QAAI,CAAC,CAACtC,OAAOkI,aAAT,IAA0B,mBAAmBlI,MAAjD,EAAyD,OAAO,IAAP,CAAzD,KAA0E,OAAO,KAAP;AAC7E;AACD;;;AAGA;AACAc,kBAAkBqH,OAAlB,GAA4B,YAAY;AACpCtH,iBAAa0B,KAAb,CAAmBiE,OAAnB,GAA6B,MAA7B;AACArE,cAAU3C,MAAV,EAAkBa,WAAlB,EAA+Bc,aAA/B,EAA8CS,WAA9C,EAFoC,CAEwB;AAC/D,CAHD","file":"demo.js","sourcesContent":["'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar horses = [].concat(_toConsumableArray(document.querySelectorAll('.horse')));\nvar innerHorseWrap = document.querySelector('.innerHorseWrap');\nvar viewWidth = parseInt(window.getComputedStyle(innerHorseWrap).width); //动画可视区宽度\nvar horseWrap = document.querySelector('.horseWrap');\nvar horseSky = document.querySelector('.horseSky');\nvar horseOrders = document.querySelector('.horseOrders');\nvar horseOrderArr = [].concat(_toConsumableArray(document.querySelectorAll('.horseOrders .horseOrder')));\nvar horseWrapLeftValue = void 0;\nvar horseSkyLeftValue = void 0;\nvar horseLineLeft = document.querySelector('.horseLineLeft');\nvar horseLineRight = document.querySelector('.horseLineRight');\nvar horseQuan = document.querySelector('.horseQuan');\nvar bottomSpace = document.querySelector('.bottomSpace');\nvar resultDialog = document.querySelector('.resultDialog'); //弹幕\nvar closeResultDialog = document.querySelector('.resultDialog .closeResultDialog'); //关闭檀木按钮\nvar horseQuanRightValue = void 0;\nvar horseLineRightValue = void 0;\nvar horseLineLeftValue = void 0;\nvar horseOrdersLeftValue = void 0;\nvar horseNumElems = [].concat(_toConsumableArray(document.querySelectorAll('.rangeNums>div.horseNum'))); //排序马匹\nvar totalDistance = 15000; //总共要跑的距离 草地宽度800-马身150-终点线距离右边75\nvar duration = [37.0, 38, 39].concat(_toConsumableArray(Array(7).fill(1).map(function () {\n    return 39 * randomBetween(1.01, 1.05);\n}).sort())); //预先设定每匹马要跑的时间\nvar openData = [8, 4, 5, 6, 1, 3, 2, 7, 9, 10]; //从后台传回的开奖结果\nvar horsesLeftsValues = null;\nvar rangeNumImg = Array(10).fill(1).map(function (item, index) {\n    return -6 - index * 62.35 + 'px -9px';\n}); //底部排序\nvar openResult = new Object(); //声明一个对象来存储openData和duration的对应关系\nopenData.forEach(function (item, index) {\n    //openData和duration对应\n    openResult['horse_' + item] = duration[index];\n});\nvar timeout = null;\n\nfunction horseInit(horses, horseOrders, horseNums, rangeNumImg) {\n    //初始位置\n    innerHorseWrap.scrollLeft = 0; //回到最左边\n    if (isIE()) {\n        //如果是IE，bottomSpace采用fixed定位，因为ie环境下滚动时动态改变left值会抖动\n        bottomSpace.style.position = 'fixed';\n        window.addEventListener('scroll', function () {\n            bottomSpace.style.left = innerHorseWrap.getBoundingClientRect().left + 'px';\n            bottomSpace.style.top = horseWrap.getBoundingClientRect().bottom + 'px';\n        });\n        bottomSpace.style.left = innerHorseWrap.getBoundingClientRect().left + 'px';\n        bottomSpace.style.top = horseWrap.getBoundingClientRect().bottom + 'px';\n    } else {\n        bottomSpace.style.left = 0; //回到最左边\n    }\n    horsesLeftsValues = Array(10).fill(0);\n    horses.forEach(function (horse, index) {\n        horse.style.backgroundImage = 'url(./images/horse_' + (index + 1) + '.png)';\n        horse.style.backgroundSize = '512px';\n        horse.style.backgroundPosition = '25px 0';\n        horse.style.top = 38 + index * 29 + 'px';\n        horse.style.left = '-95px'; //一开始的位置\n        horse.style.animation = '';\n    });\n    horseNumElems.forEach(function (num, i) {\n        //底部数字\n        num.style.backgroundPosition = rangeNumImg[i];\n    });\n    horseOrders.style.left = '65px';\n    horseOrderArr.forEach(function (order, i) {\n        order.style.top = 15 + i * 29.15 + 'px';\n    });\n    horseLineLeftValue = 40; //css里面的值\n    horseLineRightValue = -85; //css里面的值 终点线\n    horseOrdersLeftValue = 65; //css里面的值\n    horseQuanRightValue = -160; //css里面的值终点上角圈圈\n    horseWrapLeftValue = 0; //运动的云朵和草地初始背景位置为0\n    horseSkyLeftValue = 0; //运动的云朵和草地初始背景位置为0\n\n    clearTimeout(timeout); //\n}\nfunction horseRun(horses) {\n    //马跑的动作函数\n    horses.forEach(function (horse, index) {\n        horse.style.animation = 'horse_run infinite 450ms forwards step-start';\n    });\n}\n/*把路程分成5段，每段的速度不一样，可中慢快，中快慢，慢快中，慢中快，快慢中，快中慢随机;\r\n * 把时间分成5段，[[0.35,0.5,0.15,....],[0.35,0.15,0.5,...],...等;\r\n * */\n\nvar timeMaps = queue([0.19, 0.215, 0.2, 0.225, 0.17], 5); //分5段处理\nfunction createTimeMap(horses, timeMaps) {\n    //随机每匹马的时间分配\n    var timeObj = new Object();\n    horses.forEach(function (horse, index) {\n        timeObj[horse.id] = timeMaps[Math.floor(randomBetween(0, timeMaps.length))];\n    });\n    return timeObj;\n}\nfunction horseMove(horses) {\n    var total = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : totalDistance;\n    var timeMaps = arguments[2];\n    var openResult = arguments[3];\n    var openData = arguments[4];\n    var rangeNumImg = arguments[5];\n    //赛马\n\n    horseRun(horses); //跑的动作\n\n    var speeds = {},\n        leftValue = {}; //盛放各皮马的速度，盛放个屁马的left值\n\n    var timeMap = createTimeMap(horses, timeMaps);\n\n    var eachTotal = total / 5; //每段的长度\n\n    function move() {\n\n        var horsesLefts = getHorsesLeft(horses);\n\n        horses.forEach(function (horse, index) {\n            //处理10段里面每段速度\n\n            if (parseInt(horsesLefts[horse.id]) < eachTotal) {\n                //第一段的速度\n                speeds[horse.id] = eachTotal / (openResult[horse.id] * timeMap[horse.id][0] * 60); //第一段\n            } else if (parseInt(horsesLefts[horse.id]) >= eachTotal && parseInt(horsesLefts[horse.id]) < eachTotal * 2) {\n                //第二段的速度\n                speeds[horse.id] = eachTotal / (openResult[horse.id] * timeMap[horse.id][1] * 60); //第二段\n            } else if (parseInt(horsesLefts[horse.id]) >= eachTotal * 2 && parseInt(horsesLefts[horse.id]) < eachTotal * 3) {\n                //第三段的速度\n                speeds[horse.id] = eachTotal / (openResult[horse.id] * timeMap[horse.id][2] * 60); //第三段\n            } else if (parseInt(horsesLefts[horse.id]) >= eachTotal * 3 && parseInt(horsesLefts[horse.id]) < eachTotal * 4) {\n                //第4段的速度\n                speeds[horse.id] = eachTotal / (openResult[horse.id] * timeMap[horse.id][3] * 60); //第4段\n            } else if (parseInt(horsesLefts[horse.id]) >= eachTotal * 4 && parseInt(horsesLefts[horse.id]) < eachTotal * 5) {\n                //第5段的速度\n                speeds[horse.id] = eachTotal / (openResult[horse.id] * timeMap[horse.id][4] * 60); //第5段\n            }\n\n            leftValue[horse.id] = leftValue[horse.id] || 0;\n            leftValue[horse.id] += speeds[horse.id];\n            horse.style.left = leftValue[horse.id] + 'px';\n        });\n        var speedMin = Math.min.apply(Math, _toConsumableArray(Object.values(speeds)));\n        var speedMax = Math.max.apply(Math, _toConsumableArray(Object.values(speeds)));\n        var leftMax = Math.max.apply(Math, _toConsumableArray(Object.values(horsesLefts).map(function (value) {\n            return parseInt(value);\n        })));\n        var leftMin = Math.min.apply(Math, _toConsumableArray(Object.values(horsesLefts).map(function (value) {\n            return parseInt(value);\n        })));\n        var horsesLeftsKeys = Object.keys(horsesLefts); //马的id数组,马排序\n        horsesLeftsValues = Object.values(horsesLefts); //马的距离数组\n        var sort_horsesLeftsValues = horsesLeftsValues.sort(function (a, b) {\n            return parseInt(a) - parseInt(b);\n        }); //按跑动距离从小道大排序后的数组\n        var sort_horsesLeftKeys = sort_horsesLeftsValues.map(function (value) {\n            return getKeyFromValue(horsesLefts, value);\n        }); //horseid排序\n        if (!store.get('sort_horsesLeftKeys') || store.get('sort_horsesLeftKeys').toString() != sort_horsesLeftKeys.toString()) {\n            sortHorseRange(horseNumElems, horsesLefts, sort_horsesLeftsValues, total, reverse_array(openData), rangeNumImg); //底部实时排名,排名发生改变时重新排名。\n        }\n        store.set('sort_horsesLeftKeys', sort_horsesLeftKeys); //把旧的排名存起来，和之后的排名做比较\n\n        var innerHorseWrap_scrollLeft = innerHorseWrap.scrollLeft;\n        if (innerHorseWrap_scrollLeft < total - viewWidth) {\n            //未到达终点线区域\n            innerHorseWrap.scrollLeft = leftMax - (viewWidth - 200); //保持第一名永远离右边屏幕200\n        } else {\n            //到达终点线区域后，不滚动\n            innerHorseWrap.scrollLeft += 0;\n        }\n        if (!isIE()) {\n            //ie这样会抖动，不使用这个方案\n            bottomSpace.style.left = innerHorseWrap.scrollLeft + 'px'; //底部实时排序div跟随移动，以防看不到\n        }\n        resultDialog.style.left = innerHorseWrap.scrollLeft + viewWidth / 2 + 'px'; //结果弹屏也跟着走吧，免得到了终点看不到\n\n        if (leftMax > total) {//totalDistance\n        }\n\n        if (leftMin > total) {\n            var yajunHorse = document.querySelector('.yajunHorse .horse2');\n            var guanjunHorse = document.querySelector('.guanjunHorse .horse1');\n            var jijunHorse = document.querySelector('.jijunHorse .horse3');\n            var yajunNum = document.querySelector('.yajunHorse .yajunNum');\n            var guanjunNum = document.querySelector('.guanjunHorse .guanjunNum');\n            var jijunNum = document.querySelector('.jijunHorse .jijunNum');\n            var resultOrders = [].concat(_toConsumableArray(document.querySelectorAll('.resultOrders .resultOrder')));\n            yajunHorse.style.backgroundImage = 'url(./images/horse_' + openData[1] + '.png)';\n            guanjunHorse.style.backgroundImage = 'url(./images/horse_' + openData[0] + '.png)';\n            jijunHorse.style.backgroundImage = 'url(./images/horse_' + openData[2] + '.png)';\n            yajunNum.style.backgroundPosition = rangeNumImg[openData[1] - 1];\n            guanjunNum.style.backgroundPosition = rangeNumImg[openData[0] - 1];\n            jijunNum.style.backgroundPosition = rangeNumImg[openData[2] - 1];\n            resultOrders.forEach(function (v, i) {\n                //弹出开奖结果底部排列\n                v.style.backgroundPosition = rangeNumImg[openData[i + 3] - 1];\n            });\n            resultDialog.style.display = 'block';\n            setTimeout(function () {\n                window.clearTimeout(timeout); //1秒后关闭动画\n            }, 1000);\n        }\n\n        timeout = setTimeout(move, 1000 / 60);\n    }\n    move();\n}\nhorseInit(horses, horseOrders, horseNumElems, rangeNumImg); //初始位置\nhorseMove(horses, totalDistance, timeMaps, openResult, openData, rangeNumImg); //启动\n\n\nfunction getHorsesLeft(horses) {\n    //获取每匹马的left值,即跑的距离\n    var horsesLefts = new Object();\n    horses.forEach(function (horse) {\n        return horsesLefts[horse.id] = window.getComputedStyle(horse).left;\n    });\n    return horsesLefts;\n}\n\n//底部实时排名函数\nfunction sortHorseRange(horseNumElems, horsesLefts, sort_horsesLeftsValues, totalDistance, openData, rangeNumImg) {\n    var horsesLeftsValues = Object.values(horsesLefts).map(function (v) {\n        return parseInt(v);\n    });\n    var completedHorseNums = horsesLeftsValues.filter(function (v) {\n        return v >= totalDistance;\n    }).length; //已经跑完的马数量\n    var rest_horseNumElems = horseNumElems.slice(0, horseNumElems.length - completedHorseNums);\n    if (completedHorseNums == 10) {\n        sortHorseRangeLast(horseNumElems, reverse_array(openData), rangeNumImg);\n        return;\n    }\n    rest_horseNumElems.forEach(function (numElem, index) {\n        if (sort_horsesLeftsValues.length == [].concat(_toConsumableArray(new Set(sort_horsesLeftsValues))).length) {\n            //防止value值相同情况\n            numElem.style.backgroundPosition = rangeNumImg[getKeyFromValue(horsesLefts, sort_horsesLeftsValues[index]).split('_')[1] - 1];\n        }\n    });\n}\n//最终排名函数\nfunction sortHorseRangeLast(horseNumElems, openData, rangeNumImg) {\n    console.log(horseNumElems);\n    horseNumElems.forEach(function (numElem, index) {\n        numElem.style.backgroundPosition = rangeNumImg[reverse_array(openData)[index] - 1];\n    });\n}\n//工具函数\nfunction randomBetween(a, b) {\n    //获取两个数之间的随机数\n    return Math.random() * (b - a) + a;\n}\nfunction getKeyFromValue(obj, value) {\n    //通过对象的value值查找与其映射的key值,对象有相同value值的话只检索第一个\n    var objArr = Object.keys(obj).map(function (item, index) {\n        //{a:1}->[{_key:'a',_value:1}]\n        return { '_key': item, '_value': obj[item] };\n    });\n    return objArr.find(function (k, i) {\n        return k['_value'] == value;\n    })['_key'];\n}\nfunction queue(arr, size) {\n    //求数组排列的所有排列方式[1,2,3]->[1,2],[1,3],[2,3],[2,1],[3,1],[3,2]\n    if (size > arr.length) {\n        return;\n    }\n    var allResult = [];\n\n    function _queue(arr, size, result) {\n        if (result.length == size) {\n            allResult.push(result);\n        } else {\n            for (var i = 0, len = arr.length; i < len; i++) {\n                var newArr = [].concat(arr),\n                    curItem = newArr.splice(i, 1);\n                _queue(newArr, size, [].concat(result, curItem));\n            }\n        }\n    };\n    _queue(arr, size, []);\n\n    return allResult;\n}\nfunction reverse_array(arr) {\n    return arr.map(function (v, i) {\n        return arr[arr.length - 1 - i];\n    }); //反转排序\n}\nfunction isIE() {\n    //ie?\n    if (!!window.ActiveXObject || \"ActiveXObject\" in window) return true;else return false;\n}\n/*function createSpeed(){//随机生成跑步速度\r\n return Array(8).fill(1).map(()=>(randomBetween(0.7,1)*5));\r\n }*/\n//开奖结果弹幕关闭\ncloseResultDialog.onclick = function () {\n    resultDialog.style.display = 'none';\n    horseInit(horses, horseOrders, horseNumElems, rangeNumImg); //回到初始位置\n};"]}
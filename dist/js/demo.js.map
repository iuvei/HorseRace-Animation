{"version":3,"sources":["../../js/demo.js"],"names":["horses","document","querySelectorAll","innerHorseWrap","querySelector","viewWidth","parseInt","window","getComputedStyle","width","horseWrap","horseSky","horseOrders","horseOrderArr","horseWrapLeftValue","horseSkyLeftValue","horseLineLeft","horseLineRight","horseQuan","bottomSpace","resultDialog","closeResultDialog","horseQuanRightValue","horseLineRightValue","horseLineLeftValue","horseOrdersLeftValue","horseNumElems","totalDistance","duration","Array","fill","map","randomBetween","sort","openData","horsesLeftsValues","rangeNumImg","item","index","openResult","Object","forEach","timeout","horseInit","horseNums","scrollLeft","isIE","style","position","addEventListener","left","getBoundingClientRect","top","bottom","horse","backgroundImage","backgroundSize","backgroundPosition","animation","num","i","order","clearTimeout","horseRun","timeMaps","queue","createTimeMap","timeObj","id","Math","floor","length","horseMove","total","speeds","leftValue","timeMap","eachTotal","move","horsesLefts","getHorsesLeft","speedMin","min","values","speedMax","max","leftMax","value","leftMin","horsesLeftsKeys","keys","sort_horsesLeftsValues","a","b","sort_horsesLeftKeys","getKeyFromValue","store","get","toString","sortHorseRange","reverse_array","set","innerHorseWrap_scrollLeft","yajunHorse","guanjunHorse","jijunHorse","yajunNum","guanjunNum","jijunNum","resultOrders","v","display","setTimeout","completedHorseNums","filter","rest_horseNumElems","slice","sortHorseRangeLast","numElem","Set","split","console","log","random","obj","objArr","find","k","arr","size","allResult","_queue","result","push","len","newArr","concat","curItem","splice","ActiveXObject","onclick"],"mappings":"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","file":"demo.js","sourcesContent":["let horses = [...document.querySelectorAll('.horse')];\r\nlet innerHorseWrap = document.querySelector('.innerHorseWrap');\r\nlet viewWidth = parseInt(window.getComputedStyle(innerHorseWrap).width);//动画可视区宽度\r\nlet horseWrap = document.querySelector('.horseWrap');\r\nlet horseSky = document.querySelector('.horseSky');\r\nlet horseOrders = document.querySelector('.horseOrders');\r\nlet horseOrderArr = [...document.querySelectorAll('.horseOrders .horseOrder')];\r\nlet horseWrapLeftValue;\r\nlet horseSkyLeftValue;\r\nlet horseLineLeft = document.querySelector('.horseLineLeft');\r\nlet horseLineRight = document.querySelector('.horseLineRight');\r\nlet horseQuan = document.querySelector('.horseQuan');\r\nlet bottomSpace = document.querySelector('.bottomSpace');\r\nlet resultDialog = document.querySelector('.resultDialog');//弹幕\r\nlet closeResultDialog = document.querySelector('.resultDialog .closeResultDialog');//关闭檀木按钮\r\nlet horseQuanRightValue;\r\nlet horseLineRightValue;\r\nlet horseLineLeftValue;\r\nlet horseOrdersLeftValue;\r\nlet horseNumElems = [...document.querySelectorAll('.rangeNums>div.horseNum')];//排序马匹\r\nlet totalDistance = 15000;//总共要跑的距离 草地宽度800-马身150-终点线距离右边75\r\nlet duration = [37.0,38,39,...Array(7).fill(1).map(()=>39*(randomBetween(1.01,1.05))).sort()];//预先设定每匹马要跑的时间\r\nlet openData = [8,4,5,6,1,3,2,7,9,10];//从后台传回的开奖结果\r\nlet horsesLeftsValues = null;\r\nlet rangeNumImg = Array(10).fill(1).map((item,index)=>`${-6-index*62.35}px -9px`);//底部排序\r\nlet openResult = new Object();//声明一个对象来存储openData和duration的对应关系\r\nopenData.forEach((item,index)=>{//openData和duration对应\r\n    openResult[`horse_${item}`] = duration[index];\r\n});\r\nlet timeout = null;\r\n\r\nfunction horseInit(horses,horseOrders,horseNums,rangeNumImg){//初始位置\r\n    innerHorseWrap.scrollLeft = 0;//回到最左边\r\n    if(isIE()) {//如果是IE，bottomSpace采用fixed定位，因为ie环境下滚动时动态改变left值会抖动\r\n        bottomSpace.style.position = 'fixed';\r\n        window.addEventListener('scroll',(()=>{\r\n            bottomSpace.style.left = `${innerHorseWrap.getBoundingClientRect().left}px`;\r\n            bottomSpace.style.top = `${horseWrap.getBoundingClientRect().bottom}px`;\r\n        }));\r\n        bottomSpace.style.left = `${innerHorseWrap.getBoundingClientRect().left}px`;\r\n        bottomSpace.style.top = `${horseWrap.getBoundingClientRect().bottom}px`;\r\n    }else{\r\n        bottomSpace.style.left = 0;//回到最左边\r\n    }\r\n    horsesLeftsValues = Array(10).fill(0);\r\n    horses.forEach((horse,index)=>{\r\n        horse.style.backgroundImage = `url(./images/horse_${index+1}.png)`;\r\n        horse.style.backgroundSize = '512px';\r\n        horse.style.backgroundPosition = '25px 0';\r\n        horse.style.top = `${38+index*29}px`;\r\n        horse.style.left = '-95px';//一开始的位置\r\n        horse.style.animation = '';\r\n    });\r\n    horseNumElems.forEach((num,i)=>{//底部数字\r\n        num.style.backgroundPosition = rangeNumImg[i];\r\n    });\r\n    horseOrders.style.left = '65px';\r\n    horseOrderArr.forEach((order,i)=>{\r\n        order.style.top = `${15+i*29.15}px`;\r\n    });\r\n    horseLineLeftValue = 40;//css里面的值\r\n    horseLineRightValue = -85;//css里面的值 终点线\r\n    horseOrdersLeftValue = 65;//css里面的值\r\n    horseQuanRightValue = -160;//css里面的值终点上角圈圈\r\n    horseWrapLeftValue = 0;//运动的云朵和草地初始背景位置为0\r\n    horseSkyLeftValue = 0;//运动的云朵和草地初始背景位置为0\r\n\r\n    clearTimeout(timeout);//\r\n}\r\nfunction horseRun(horses){//马跑的动作函数\r\n    horses.forEach((horse,index)=>{\r\n        horse.style.animation = `horse_run infinite 450ms forwards step-start`;\r\n    });\r\n}\r\n/*把路程分成5段，每段的速度不一样，可中慢快，中快慢，慢快中，慢中快，快慢中，快中慢随机;\r\n * 把时间分成5段，[[0.35,0.5,0.15,....],[0.35,0.15,0.5,...],...等;\r\n * */\r\n\r\nlet timeMaps = queue([0.19,0.215,0.2,0.225,0.17], 5);//分5段处理\r\nfunction createTimeMap(horses,timeMaps){//随机每匹马的时间分配\r\n    let timeObj = new Object();\r\n    horses.forEach((horse,index)=>{\r\n        timeObj[horse.id] = timeMaps[Math.floor(randomBetween(0,timeMaps.length))];\r\n    });\r\n    return timeObj;\r\n}\r\nfunction horseMove(horses,total = totalDistance,timeMaps,openResult,openData,rangeNumImg){//赛马\r\n\r\n    horseRun(horses);//跑的动作\r\n\r\n    let speeds = {},leftValue = {};//盛放各皮马的速度，盛放个屁马的left值\r\n\r\n    let timeMap = createTimeMap(horses,timeMaps);\r\n\r\n    let eachTotal = total/5;//每段的长度\r\n\r\n    function move(){\r\n\r\n        let horsesLefts = getHorsesLeft(horses);\r\n\r\n        horses.forEach((horse,index)=>{//处理10段里面每段速度\r\n\r\n            if(parseInt(horsesLefts[horse.id])<eachTotal){//第一段的速度\r\n                speeds[horse.id] = eachTotal/(openResult[horse.id]*(timeMap[horse.id][0])*60);//第一段\r\n            }else if(parseInt(horsesLefts[horse.id])>=eachTotal&&parseInt(horsesLefts[horse.id])<eachTotal*2){//第二段的速度\r\n                speeds[horse.id] = eachTotal/(openResult[horse.id]*(timeMap[horse.id][1])*60);//第二段\r\n            }else if(parseInt(horsesLefts[horse.id])>=eachTotal*2&&parseInt(horsesLefts[horse.id])<eachTotal*3){//第三段的速度\r\n                speeds[horse.id] = eachTotal/(openResult[horse.id]*(timeMap[horse.id][2])*60);//第三段\r\n            }else if(parseInt(horsesLefts[horse.id])>=eachTotal*3&&parseInt(horsesLefts[horse.id])<eachTotal*4){//第4段的速度\r\n                speeds[horse.id] = eachTotal/(openResult[horse.id]*(timeMap[horse.id][3])*60);//第4段\r\n            }else if(parseInt(horsesLefts[horse.id])>=eachTotal*4&&parseInt(horsesLefts[horse.id])<eachTotal*5){//第5段的速度\r\n                speeds[horse.id] = eachTotal/(openResult[horse.id]*(timeMap[horse.id][4])*60);//第5段\r\n            }\r\n\r\n            leftValue[horse.id] = leftValue[horse.id] || 0;\r\n            leftValue[horse.id] += speeds[horse.id];\r\n            horse.style.left = `${leftValue[horse.id]}px`;\r\n\r\n        });\r\n        let speedMin = Math.min(...Object.values(speeds));\r\n        let speedMax = Math.max(...Object.values(speeds));\r\n        let leftMax = Math.max(...Object.values(horsesLefts).map(value=>parseInt(value)));\r\n        let leftMin = Math.min(...Object.values(horsesLefts).map(value=>parseInt(value)));\r\n        let horsesLeftsKeys = Object.keys(horsesLefts);//马的id数组,马排序\r\n        horsesLeftsValues = Object.values(horsesLefts);//马的距离数组\r\n        let sort_horsesLeftsValues = horsesLeftsValues.sort((a,b)=>parseInt(a)-parseInt(b));//按跑动距离从小道大排序后的数组\r\n        let sort_horsesLeftKeys = sort_horsesLeftsValues.map((value)=>getKeyFromValue(horsesLefts,value));//horseid排序\r\n        if(!store.get('sort_horsesLeftKeys')||store.get('sort_horsesLeftKeys').toString()!=sort_horsesLeftKeys.toString()){\r\n            sortHorseRange(horseNumElems,horsesLefts,sort_horsesLeftsValues,total,reverse_array(openData),rangeNumImg);//底部实时排名,排名发生改变时重新排名。\r\n        }\r\n        store.set('sort_horsesLeftKeys',sort_horsesLeftKeys);//把旧的排名存起来，和之后的排名做比较\r\n\r\n        let innerHorseWrap_scrollLeft = innerHorseWrap.scrollLeft;\r\n        if(innerHorseWrap_scrollLeft<total-viewWidth){//未到达终点线区域\r\n            innerHorseWrap.scrollLeft = leftMax-(viewWidth-200);//保持第一名永远离右边屏幕200\r\n        }else{//到达终点线区域后，不滚动\r\n            innerHorseWrap.scrollLeft += 0;\r\n        }\r\n        if(!isIE()){//ie这样会抖动，不使用这个方案\r\n            bottomSpace.style.left = `${innerHorseWrap.scrollLeft}px`;//底部实时排序div跟随移动，以防看不到\r\n        }\r\n        resultDialog.style.left = `${innerHorseWrap.scrollLeft + viewWidth/2}px`;//结果弹屏也跟着走吧，免得到了终点看不到\r\n\r\n        if(leftMax>total){ //totalDistance\r\n        }\r\n\r\n        if(leftMin>total){\r\n            let yajunHorse = document.querySelector('.yajunHorse .horse2');\r\n            let guanjunHorse = document.querySelector('.guanjunHorse .horse1');\r\n            let jijunHorse = document.querySelector('.jijunHorse .horse3');\r\n            let yajunNum = document.querySelector('.yajunHorse .yajunNum');\r\n            let guanjunNum = document.querySelector('.guanjunHorse .guanjunNum');\r\n            let jijunNum = document.querySelector('.jijunHorse .jijunNum');\r\n            let resultOrders = [...document.querySelectorAll('.resultOrders .resultOrder')];\r\n            yajunHorse.style.backgroundImage = `url(./images/horse_${openData[1]}.png)`;\r\n            guanjunHorse.style.backgroundImage = `url(./images/horse_${openData[0]}.png)`;\r\n            jijunHorse.style.backgroundImage = `url(./images/horse_${openData[2]}.png)`;\r\n            yajunNum.style.backgroundPosition = rangeNumImg[openData[1]-1];\r\n            guanjunNum.style.backgroundPosition = rangeNumImg[openData[0]-1];\r\n            jijunNum.style.backgroundPosition = rangeNumImg[openData[2]-1];\r\n            resultOrders.forEach((v,i)=>{//弹出开奖结果底部排列\r\n                v.style.backgroundPosition = rangeNumImg[openData[i+3]-1];\r\n            });\r\n            resultDialog.style.display = 'block';\r\n            setTimeout(()=>{\r\n                window.clearTimeout(timeout);//1秒后关闭动画\r\n            },1000);\r\n        }\r\n\r\n        timeout = setTimeout(move,1000/60);\r\n    }\r\n    move();\r\n}\r\nhorseInit(horses,horseOrders,horseNumElems,rangeNumImg);//初始位置\r\nhorseMove(horses,totalDistance,timeMaps,openResult,openData,rangeNumImg);//启动\r\n\r\n\r\nfunction getHorsesLeft(horses){//获取每匹马的left值,即跑的距离\r\n    let horsesLefts = new Object();\r\n    horses.forEach(horse=>horsesLefts[horse.id] = window.getComputedStyle(horse).left);\r\n    return horsesLefts;\r\n}\r\n\r\n\r\n//底部实时排名函数\r\nfunction sortHorseRange(horseNumElems,horsesLefts,sort_horsesLeftsValues,totalDistance,openData,rangeNumImg){\r\n    let horsesLeftsValues = Object.values(horsesLefts).map(v=>parseInt(v));\r\n    let completedHorseNums = horsesLeftsValues.filter(v=>v>=totalDistance).length;//已经跑完的马数量\r\n    let rest_horseNumElems = horseNumElems.slice(0,horseNumElems.length-completedHorseNums);\r\n    if(completedHorseNums==10){\r\n        sortHorseRangeLast(horseNumElems,reverse_array(openData),rangeNumImg);\r\n        return;\r\n    }\r\n    rest_horseNumElems.forEach((numElem,index)=>{\r\n        if(sort_horsesLeftsValues.length == [...new Set(sort_horsesLeftsValues)].length){//防止value值相同情况\r\n            numElem.style.backgroundPosition = rangeNumImg[getKeyFromValue(horsesLefts,sort_horsesLeftsValues[index]).split('_')[1]-1];\r\n        }\r\n    });\r\n}\r\n//最终排名函数\r\nfunction sortHorseRangeLast(horseNumElems,openData,rangeNumImg){\r\n    console.log(horseNumElems)\r\n    horseNumElems.forEach((numElem,index)=>{\r\n        numElem.style.backgroundPosition = rangeNumImg[reverse_array(openData)[index]-1];\r\n    });\r\n}\r\n//工具函数\r\nfunction randomBetween(a,b){//获取两个数之间的随机数\r\n    return Math.random()*(b-a)+a;\r\n}\r\nfunction getKeyFromValue(obj,value){//通过对象的value值查找与其映射的key值,对象有相同value值的话只检索第一个\r\n    let objArr = Object.keys(obj).map((item,index)=>{//{a:1}->[{_key:'a',_value:1}]\r\n        return {'_key':item,'_value':obj[item]};\r\n    });\r\n    return objArr.find((k,i)=>k['_value'] == value)['_key'];\r\n}\r\nfunction queue(arr, size) {//求数组排列的所有排列方式[1,2,3]->[1,2],[1,3],[2,3],[2,1],[3,1],[3,2]\r\n    if (size > arr.length) {\r\n        return;\r\n    }\r\n    var allResult = [];\r\n\r\n    function _queue(arr, size, result) {\r\n        if (result.length == size) {\r\n            allResult.push(result);\r\n        } else {\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                var newArr = [].concat(arr),\r\n                    curItem = newArr.splice(i, 1);\r\n                _queue(newArr, size, [].concat(result, curItem));\r\n            }\r\n        }\r\n    };\r\n    _queue(arr, size, []);\r\n\r\n    return allResult;\r\n}\r\nfunction reverse_array(arr) {\r\n    return arr.map((v,i)=>arr[arr.length-1-i]);//反转排序\r\n}\r\nfunction isIE() { //ie?\r\n    if (!!window.ActiveXObject || \"ActiveXObject\" in window)   return true;\r\n    else   return false;\r\n}\r\n/*function createSpeed(){//随机生成跑步速度\r\n return Array(8).fill(1).map(()=>(randomBetween(0.7,1)*5));\r\n }*/\r\n//开奖结果弹幕关闭\r\ncloseResultDialog.onclick = function(){\r\n    resultDialog.style.display = 'none';\r\n    horseInit(horses,horseOrders,horseNumElems,rangeNumImg);//回到初始位置\r\n};\r\n"]}